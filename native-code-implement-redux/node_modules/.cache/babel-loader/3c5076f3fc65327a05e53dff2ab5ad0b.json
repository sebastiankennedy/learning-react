{"ast":null,"code":"var _jsxFileName = \"/Users/sebastian/Code/Study/learning-react/native-code-implement-redux/src/App.js\";\nimport React, { memo, useState, useRef, useEffect, useCallback } from 'react';\nimport { createAdd, createRemove, createToggle } from './actions';\nimport './App.css';\nconst Control = memo(function Control(props) {\n  const {\n    addTodo\n  } = props;\n  const inputRef = useRef();\n\n  const onSubmit = e => {\n    e.preventDefault();\n    const newText = inputRef.current.value.trim();\n\n    if (!newText) {\n      return;\n    }\n\n    addTodo({\n      id: Date.now(),\n      text: newText,\n      complete: false\n    });\n    inputRef.current.value = '';\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, \"todos\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"new-todo\",\n    placeholder: \"Add Todo\",\n    ref: inputRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  })));\n});\n\nfunction Todos(props) {\n  const {\n    removeTodo,\n    toggleTodo,\n    todos\n  } = props;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, todos.map(todo => {\n    return /*#__PURE__*/React.createElement(TodoItem, {\n      key: todo.id,\n      todo: todo,\n      removeTodo: removeTodo,\n      toggleTodo: toggleTodo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 19\n      }\n    });\n  }));\n}\n\nfunction TodoItem(props) {\n  const {\n    todo: {\n      id,\n      text,\n      complete\n    },\n    removeTodo,\n    toggleTodo\n  } = props;\n\n  const onChange = () => {\n    toggleTodo(id);\n  };\n\n  const onRemove = () => {\n    removeTodo(id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"todo-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: onChange,\n    checked: complete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: complete ? 'complete' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, text), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onRemove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"\\xD7\"));\n}\n\nfunction App() {\n  const [todos, setTodos] = useState([]);\n  const [incrementCount, setIncrementCount] = useState(0);\n  useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem('TODO_LIST') || '[]');\n    dispatch({\n      type: 'set',\n      payload: todos\n    });\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('TODO_LIST', JSON.stringify(todos));\n  }, [todos]);\n  let result = bindActionCreators({\n    removeTodo: createRemove,\n    toggleTodo: createToggle\n  }, dispatch);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Control, Object.assign({}, bindActionCreators({\n    addTodo: createAdd\n  }, dispatch), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Todos, {\n    removeTodo: result.removeTodo,\n    toggleTodo: result.toggleTodo,\n    todos: todos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  const result = {};\n\n  for (let key in actionCreators) {\n    result[key] = function (...args) {\n      const actionCreator = actionCreators[key];\n      const action = actionCreator(...args);\n      dispatch(action);\n    };\n  }\n\n  return result;\n} // 当函数作为属性传入进子组件当中，需要使用 useCallback() 函数包裹\n\n\nconst dispatch = useCallback(action => {\n  const state = {\n    todos,\n    incrementCount\n  };\n  const setters = {\n    todos: setTodos,\n    incrementCount: setIncrementCount\n  };\n  const newState = reducer(state, action);\n\n  for (let key in newState) {\n    setters[key](newState[key]);\n  }\n}, [todos, incrementCount]);\nconst reducers = {\n  todos(state, action) {\n    const {\n      type,\n      payload\n    } = action;\n\n    switch (type) {\n      case 'set':\n        return payload;\n\n      case 'add':\n        return [...state, payload];\n\n      case 'remove':\n        return odos.filter(todo => {\n          return todo.id !== payload;\n        });\n\n      case 'toggle':\n        return state.map(todo => {\n          return todo.id === payload ? { ...todo,\n            complete: !todo.complete\n          } : todo;\n        });\n    }\n\n    return state;\n  },\n\n  incrementCount(state, action) {\n    const {\n      type,\n      payload\n    } = action;\n\n    switch (type) {\n      case 'set':\n      case 'add':\n        return state + 1;\n    }\n\n    return state;\n  }\n\n};\n\nfunction reducer(state, action) {\n  const {\n    type,\n    payload\n  } = action;\n  const {\n    todos,\n    incrementCount\n  } = state;\n\n  switch (type) {\n    case 'set':\n      return { ...state,\n        todos: payload,\n        incrementCount: incrementCount + 1\n      };\n\n    case 'add':\n      return { ...state,\n        todos: [...todos, payload],\n        incrementCount: incrementCount + 1\n      };\n\n    case 'remove':\n      return { ...state,\n        todos: todos.filter(todo => {\n          return todo.id !== payload;\n        })\n      };\n\n    case 'toggle':\n      return { ...state,\n        todos: todos.map(todo => {\n          return todo.id === payload ? { ...todo,\n            complete: !todo.complete\n          } : todo;\n        })\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sebastian/Code/Study/learning-react/native-code-implement-redux/src/App.js"],"names":["React","memo","useState","useRef","useEffect","useCallback","createAdd","createRemove","createToggle","Control","props","addTodo","inputRef","onSubmit","e","preventDefault","newText","current","value","trim","id","Date","now","text","complete","Todos","removeTodo","toggleTodo","todos","map","todo","TodoItem","onChange","onRemove","App","setTodos","incrementCount","setIncrementCount","JSON","parse","localStorage","getItem","dispatch","type","payload","setItem","stringify","result","bindActionCreators","actionCreators","key","args","actionCreator","action","state","setters","newState","reducer","reducers","odos","filter"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,IAAhB,EAAsBC,QAAtB,EAAgCC,MAAhC,EAAwCC,SAAxC,EAAmDC,WAAnD,QAAsE,OAAtE;AACA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,YAAlC,QAAsD,WAAtD;AACA,OAAO,WAAP;AAEA,MAAMC,OAAO,GAAGR,IAAI,CAAC,SAASQ,OAAT,CAAiBC,KAAjB,EAAwB;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAAcD,KAApB;AACA,QAAME,QAAQ,GAAGT,MAAM,EAAvB;;AAEA,QAAMU,QAAQ,GAAIC,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,OAAO,GAAGJ,QAAQ,CAACK,OAAT,CAAiBC,KAAjB,CAAuBC,IAAvB,EAAhB;;AAEA,QAAI,CAACH,OAAL,EAAc;AACZ;AACD;;AAEDL,IAAAA,OAAO,CAAC;AACNS,MAAAA,EAAE,EAAEC,IAAI,CAACC,GAAL,EADE;AAENC,MAAAA,IAAI,EAAEP,OAFA;AAGNQ,MAAAA,QAAQ,EAAE;AAHJ,KAAD,CAAP;AAMAZ,IAAAA,QAAQ,CAACK,OAAT,CAAiBC,KAAjB,GAAyB,EAAzB;AACD,GAfD;;AAiBA,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAIE;AAAM,IAAA,QAAQ,EAAEL,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,UAFZ;AAGE,IAAA,WAAW,EAAC,UAHd;AAIE,IAAA,GAAG,EAAED,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CADF;AAeD,CApCmB,CAApB;;AAsCA,SAASa,KAAT,CAAef,KAAf,EAAsB;AACpB,QAAM;AAAEgB,IAAAA,UAAF;AAAcC,IAAAA,UAAd;AAA0BC,IAAAA;AAA1B,MAAoClB,KAA1C;AACA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIkB,KAAK,CAACC,GAAN,CAAUC,IAAI,IAAI;AAChB,wBAAQ,oBAAC,QAAD;AACN,MAAA,GAAG,EAAEA,IAAI,CAACV,EADJ;AAEN,MAAA,IAAI,EAAEU,IAFA;AAGN,MAAA,UAAU,EAAEJ,UAHN;AAIN,MAAA,UAAU,EAAEC,UAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AAMD,GAPD,CAFJ,CADF;AAcD;;AAED,SAASI,QAAT,CAAkBrB,KAAlB,EAAyB;AACvB,QAAM;AAAEoB,IAAAA,IAAI,EAAE;AACZV,MAAAA,EADY;AAEZG,MAAAA,IAFY;AAGZC,MAAAA;AAHY,KAAR;AAKJE,IAAAA,UALI;AAMJC,IAAAA;AANI,MAOFjB,KAPJ;;AASA,QAAMsB,QAAQ,GAAG,MAAM;AACrBL,IAAAA,UAAU,CAACP,EAAD,CAAV;AACD,GAFD;;AAIA,QAAMa,QAAQ,GAAG,MAAM;AACrBP,IAAAA,UAAU,CAACN,EAAD,CAAV;AACD,GAFD;;AAIA,sBACE;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,QAAQ,EAAEY,QAFZ;AAGE,IAAA,OAAO,EAAER,QAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME;AAAO,IAAA,SAAS,EAAEA,QAAQ,GAAG,UAAH,GAAgB,EAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+CD,IAA/C,CANF,eAOE;AAAQ,IAAA,OAAO,EAAEU,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF,CADF;AAWD;;AAED,SAASC,GAAT,GAAe;AACb,QAAM,CAACN,KAAD,EAAQO,QAAR,IAAoBjC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACkC,cAAD,EAAiBC,iBAAjB,IAAsCnC,QAAQ,CAAC,CAAD,CAApD;AAEAE,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwB,KAAK,GAAGU,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,KAAqC,IAAhD,CAAd;AACAC,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE,KAAR;AAAeC,MAAAA,OAAO,EAAEhB;AAAxB,KAAD,CAAR;AACD,GAHQ,EAGN,EAHM,CAAT;AAKAxB,EAAAA,SAAS,CAAC,MAAM;AACdoC,IAAAA,YAAY,CAACK,OAAb,CAAqB,WAArB,EAAkCP,IAAI,CAACQ,SAAL,CAAelB,KAAf,CAAlC;AACD,GAFQ,EAEN,CAACA,KAAD,CAFM,CAAT;AAIA,MAAImB,MAAM,GAAGC,kBAAkB,CAAC;AAC9BtB,IAAAA,UAAU,EAAEnB,YADkB;AAE9BoB,IAAAA,UAAU,EAAEnB;AAFkB,GAAD,EAG5BkC,QAH4B,CAA/B;AAKA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD,oBAEKM,kBAAkB,CAAC;AACpBrC,IAAAA,OAAO,EAAEL;AADW,GAAD,EAElBoC,QAFkB,CAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,eAQE,oBAAC,KAAD;AACE,IAAA,UAAU,EAAEK,MAAM,CAACrB,UADrB;AAEE,IAAA,UAAU,EAAEqB,MAAM,CAACpB,UAFrB;AAGE,IAAA,KAAK,EAAEC,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADF;AAgBD;;AAED,SAASoB,kBAAT,CAA4BC,cAA5B,EAA4CP,QAA5C,EAAsD;AACpD,QAAMK,MAAM,GAAG,EAAf;;AAEA,OAAK,IAAIG,GAAT,IAAgBD,cAAhB,EAAgC;AAC9BF,IAAAA,MAAM,CAACG,GAAD,CAAN,GAAc,UAAU,GAAGC,IAAb,EAAmB;AAC/B,YAAMC,aAAa,GAAGH,cAAc,CAACC,GAAD,CAApC;AACA,YAAMG,MAAM,GAAGD,aAAa,CAAC,GAAGD,IAAJ,CAA5B;AACAT,MAAAA,QAAQ,CAACW,MAAD,CAAR;AACD,KAJD;AAKD;;AAED,SAAON,MAAP;AACD,C,CAED;;;AACA,MAAML,QAAQ,GAAGrC,WAAW,CAAEgD,MAAD,IAAY;AACvC,QAAMC,KAAK,GAAG;AACZ1B,IAAAA,KADY;AAEZQ,IAAAA;AAFY,GAAd;AAKA,QAAMmB,OAAO,GAAG;AACd3B,IAAAA,KAAK,EAAEO,QADO;AAEdC,IAAAA,cAAc,EAAEC;AAFF,GAAhB;AAKA,QAAMmB,QAAQ,GAAGC,OAAO,CAACH,KAAD,EAAQD,MAAR,CAAxB;;AACA,OAAK,IAAIH,GAAT,IAAgBM,QAAhB,EAA0B;AACxBD,IAAAA,OAAO,CAACL,GAAD,CAAP,CAAaM,QAAQ,CAACN,GAAD,CAArB;AACD;AAEF,CAhB2B,EAgBzB,CAACtB,KAAD,EAAQQ,cAAR,CAhByB,CAA5B;AAkBA,MAAMsB,QAAQ,GAAG;AACf9B,EAAAA,KAAK,CAAC0B,KAAD,EAAQD,MAAR,EAAgB;AACnB,UAAM;AAAEV,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAoBS,MAA1B;;AAEA,YAAQV,IAAR;AACE,WAAK,KAAL;AACE,eAAOC,OAAP;;AACF,WAAK,KAAL;AACE,eAAO,CAAC,GAAGU,KAAJ,EAAWV,OAAX,CAAP;;AACF,WAAK,QAAL;AACE,eAAOe,IAAI,CAACC,MAAL,CAAY9B,IAAI,IAAI;AACzB,iBAAOA,IAAI,CAACV,EAAL,KAAYwB,OAAnB;AACD,SAFM,CAAP;;AAGF,WAAK,QAAL;AACE,eAAOU,KAAK,CAACzB,GAAN,CAAUC,IAAI,IAAI;AACvB,iBAAOA,IAAI,CAACV,EAAL,KAAYwB,OAAZ,GACH,EACA,GAAGd,IADH;AAEAN,YAAAA,QAAQ,EAAE,CAACM,IAAI,CAACN;AAFhB,WADG,GAKHM,IALJ;AAMD,SAPM,CAAP;AAVJ;;AAmBA,WAAOwB,KAAP;AACD,GAxBc;;AAyBflB,EAAAA,cAAc,CAACkB,KAAD,EAAQD,MAAR,EAAgB;AAC5B,UAAM;AAACV,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAkBS,MAAxB;;AAEA,YAAQV,IAAR;AACE,WAAK,KAAL;AACA,WAAK,KAAL;AACE,eAAOW,KAAK,GAAG,CAAf;AAHJ;;AAMA,WAAOA,KAAP;AACD;;AAnCc,CAAjB;;AAsCA,SAASG,OAAT,CAAiBH,KAAjB,EAAwBD,MAAxB,EAAgC;AAC9B,QAAM;AAAEV,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBS,MAA1B;AACA,QAAM;AAAEzB,IAAAA,KAAF;AAASQ,IAAAA;AAAT,MAA4BkB,KAAlC;;AAEA,UAAQX,IAAR;AACE,SAAK,KAAL;AACE,aAAO,EACL,GAAGW,KADE;AAEL1B,QAAAA,KAAK,EAAEgB,OAFF;AAGLR,QAAAA,cAAc,EAAEA,cAAc,GAAG;AAH5B,OAAP;;AAKF,SAAK,KAAL;AACE,aAAO,EACL,GAAGkB,KADE;AAEL1B,QAAAA,KAAK,EAAE,CAAC,GAAGA,KAAJ,EAAWgB,OAAX,CAFF;AAGLR,QAAAA,cAAc,EAAEA,cAAc,GAAG;AAH5B,OAAP;;AAKF,SAAK,QAAL;AACE,aAAO,EACL,GAAGkB,KADE;AAEL1B,QAAAA,KAAK,EAAEA,KAAK,CAACgC,MAAN,CAAa9B,IAAI,IAAI;AAC1B,iBAAOA,IAAI,CAACV,EAAL,KAAYwB,OAAnB;AACD,SAFM;AAFF,OAAP;;AAMF,SAAK,QAAL;AACE,aAAO,EACL,GAAGU,KADE;AAEL1B,QAAAA,KAAK,EAAEA,KAAK,CAACC,GAAN,CAAUC,IAAI,IAAI;AACvB,iBAAOA,IAAI,CAACV,EAAL,KAAYwB,OAAZ,GACH,EACA,GAAGd,IADH;AAEAN,YAAAA,QAAQ,EAAE,CAACM,IAAI,CAACN;AAFhB,WADG,GAKHM,IALJ;AAMD,SAPM;AAFF,OAAP;;AAWF;AACE,aAAOwB,KAAP;AAjCJ;AAmCD;;AAED,eAAepB,GAAf","sourcesContent":["import React, { memo, useState, useRef, useEffect, useCallback } from 'react';\nimport { createAdd, createRemove, createToggle } from './actions'\nimport './App.css';\n\nconst Control = memo(function Control(props) {\n  const { addTodo } = props;\n  const inputRef = useRef();\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    const newText = inputRef.current.value.trim();\n\n    if (!newText) {\n      return;\n    }\n\n    addTodo({\n      id: Date.now(),\n      text: newText,\n      complete: false\n    })\n\n    inputRef.current.value = ''\n  }\n\n  return (\n    <div className=\"control\">\n      <h1>\n        todos\n      </h1>\n      <form onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          className=\"new-todo\"\n          placeholder=\"Add Todo\"\n          ref={inputRef}\n        />\n      </form>\n    </div>\n  )\n})\n\nfunction Todos(props) {\n  const { removeTodo, toggleTodo, todos } = props\n  return (\n    <ul>\n      {\n        todos.map(todo => {\n          return (<TodoItem\n            key={todo.id}\n            todo={todo}\n            removeTodo={removeTodo}\n            toggleTodo={toggleTodo}\n          />)\n        })\n      }\n    </ul>\n  )\n}\n\nfunction TodoItem(props) {\n  const { todo: {\n    id,\n    text,\n    complete\n  },\n    removeTodo,\n    toggleTodo\n  } = props\n\n  const onChange = () => {\n    toggleTodo(id)\n  }\n\n  const onRemove = () => {\n    removeTodo(id)\n  }\n\n  return (\n    <li className=\"todo-item\">\n      <input\n        type=\"checkbox\"\n        onChange={onChange}\n        checked={complete}\n      />\n      <label className={complete ? 'complete' : ''}>{text}</label>\n      <button onClick={onRemove}>&#xd7;</button>\n    </li>\n  )\n}\n\nfunction App() {\n  const [todos, setTodos] = useState([])\n  const [incrementCount, setIncrementCount] = useState(0)\n\n  useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem('TODO_LIST') || '[]')\n    dispatch({ type: 'set', payload: todos })\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('TODO_LIST', JSON.stringify(todos))\n  }, [todos])\n\n  let result = bindActionCreators({\n    removeTodo: createRemove,\n    toggleTodo: createToggle\n  }, dispatch)\n\n  return (\n    <div className=\"App\">\n      <Control\n        {\n        ...bindActionCreators({\n          addTodo: createAdd\n        }, dispatch)\n        }\n      />\n      <Todos\n        removeTodo={result.removeTodo}\n        toggleTodo={result.toggleTodo}\n        todos={todos}\n      />\n    </div>\n  );\n}\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  const result = {};\n\n  for (let key in actionCreators) {\n    result[key] = function (...args) {\n      const actionCreator = actionCreators[key];\n      const action = actionCreator(...args);\n      dispatch(action);\n    }\n  }\n\n  return result;\n}\n\n// 当函数作为属性传入进子组件当中，需要使用 useCallback() 函数包裹\nconst dispatch = useCallback((action) => {\n  const state = {\n    todos,\n    incrementCount\n  }\n\n  const setters = {\n    todos: setTodos,\n    incrementCount: setIncrementCount\n  }\n\n  const newState = reducer(state, action)\n  for (let key in newState) {\n    setters[key](newState[key]);\n  }\n\n}, [todos, incrementCount])\n\nconst reducers = {\n  todos(state, action) {\n    const { type, payload } = action;\n\n    switch (type) {\n      case 'set':\n        return payload\n      case 'add':\n        return [...state, payload]\n      case 'remove':\n        return odos.filter(todo => {\n          return todo.id !== payload\n        })\n      case 'toggle':\n        return state.map(todo => {\n          return todo.id === payload\n            ? {\n              ...todo,\n              complete: !todo.complete\n            }\n            : todo\n        })\n    }\n    return state\n  },\n  incrementCount(state, action) {\n    const {type, payload} = action;\n\n    switch (type) {\n      case 'set':\n      case 'add':\n        return state + 1;\n    }\n\n    return state;\n  }\n}\n\nfunction reducer(state, action) {\n  const { type, payload } = action;\n  const { todos, incrementCount } = state;\n\n  switch (type) {\n    case 'set':\n      return {\n        ...state,\n        todos: payload,\n        incrementCount: incrementCount + 1\n      }\n    case 'add':\n      return {\n        ...state,\n        todos: [...todos, payload],\n        incrementCount: incrementCount + 1\n      }\n    case 'remove':\n      return {\n        ...state,\n        todos: todos.filter(todo => {\n          return todo.id !== payload\n        })\n      }\n    case 'toggle':\n      return {\n        ...state,\n        todos: todos.map(todo => {\n          return todo.id === payload\n            ? {\n              ...todo,\n              complete: !todo.complete\n            }\n            : todo\n        })\n      }\n    default:\n      return state\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}